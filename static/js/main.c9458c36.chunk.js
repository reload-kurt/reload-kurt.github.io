(this["webpackJsonphusky-reporting"]=this["webpackJsonphusky-reporting"]||[]).push([[0],{12:function(e,t,a){e.exports=a(26)},17:function(e,t,a){},19:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(9),c=a.n(r),u=(a(17),a(6)),s=a.n(u),o=a(10),m=a(5),i=(a(19),a(20),a(28)),d=a(29),E=a(30),h=a(32),p=a(33),y=a(34),f=a(31);var b=function(){var e=Object(n.useState)(null),t=Object(m.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),u=Object(m.a)(c,2),b=u[0],v=u[1],k=Object(n.useState)(null),g=Object(m.a)(k,2),w=g[0],j=g[1],x=Object(n.useState)(null),S=Object(m.a)(x,2),O=S[0],q=S[1],A=Object(n.useState)({round:{cans:0,unique:0,surveys:0},total:{cans:0,unique:0,surveys:0}}),P=Object(m.a)(A,2),T=P[0],C=(P[1],function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,l,r,c,u,o,m,i,d,E;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),t=T,n=w+" 00:01:00,"+O+" 23:59:00",e.next=5,fetch("https://compo-api.huskypet.co.za/husky-microsite/items/survey?access_token="+a+"&filter[created_on][between]="+n).catch((function(e){return alert("Unable to communicate with API")}));case 5:return l=e.sent,e.next=8,fetch("https://compo-api.huskypet.co.za/husky-microsite/items/survey?access_token="+a+"&limit=-1").catch((function(e){return alert("Unable to communicate with API")}));case 8:return r=e.sent,e.next=11,fetch("https://compo-api.huskypet.co.za/husky-microsite/items/entries?access_token="+a+"&filter[created_on][between]="+n).catch((function(e){return alert("Unable to communicate with API")}));case 11:return c=e.sent,e.next=14,fetch("https://compo-api.huskypet.co.za/husky-microsite/items/entries?access_token="+a+"&limit=-1").catch((function(e){return alert("Unable to communicate with API")}));case 14:if(u=e.sent,!(l&&l.ok&&r&&r.ok&&c&&c.ok&&u&&u.ok)){e.next=36;break}return e.next=18,l.json();case 18:return o=e.sent,e.next=21,r.json();case 21:return m=e.sent,e.next=24,c.json();case 24:return i=e.sent,e.next=27,u.json();case 27:d=e.sent,t.round.surveys=o.data.length,t.total.surveys=m.data.length,t.round.cans=i.data.length,t.total.cans=d.data.length,E=i.data.map((function(e){return e.customer})),t.round.unique=Array.from(new Set(E)).length,E=d.data.map((function(e){return e.customer})),t.total.unique=Array.from(new Set(E)).length;case 36:v(!1);case 37:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return l.a.createElement("div",{className:"App"},l.a.createElement(i.a,null,l.a.createElement(d.a,null,l.a.createElement(E.a,null,l.a.createElement(h.a,{className:"mb-3"},l.a.createElement(h.a.Prepend,null,l.a.createElement(h.a.Text,{id:"basic-addon3"},"Security token (ask Kurt):")),l.a.createElement(p.a,{value:"",id:"basic-url","aria-describedby":"basic-addon3",onChange:function(e){return r(e.target.value)}})))),l.a.createElement(d.a,null,l.a.createElement(E.a,null,l.a.createElement("p",null,"Select the first day this round starts and the last day of the round.",l.a.createElement("br",null),l.a.createElement("small",null,"(System will automatically select 00:01 and 23:59 from first/last)")))),l.a.createElement(d.a,null,l.a.createElement(E.a,null,l.a.createElement(h.a,{className:"mb-3"},l.a.createElement(h.a.Prepend,null,l.a.createElement(h.a.Text,null,"First Day")),l.a.createElement(p.a,{onChange:function(e){return j(e.target.value)},type:"date"}))),l.a.createElement(E.a,null,l.a.createElement(h.a,{className:"mb-3"},l.a.createElement(h.a.Prepend,null,l.a.createElement(h.a.Text,null,"Last Day")),l.a.createElement(p.a,{onChange:function(e){return q(e.target.value)},type:"date"}))),l.a.createElement(E.a,null,l.a.createElement(y.a,{block:!0,variant:"primary",onClick:function(){return C()}},"Refresh"))),l.a.createElement(d.a,null,l.a.createElement(E.a,null,l.a.createElement("hr",null))),l.a.createElement(d.a,null,l.a.createElement(E.a,null,b?l.a.createElement("p",null,"Loading..."):l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Selected Round"),l.a.createElement(f.a,{striped:!0,bordered:!0,hover:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Total Entries (Cans)"),l.a.createElement("th",null,"Round Unique Entries"),l.a.createElement("th",null,"Total Survey Results"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,T.round.cans),l.a.createElement("td",null,T.round.unique),l.a.createElement("td",null,T.round.surveys)))),l.a.createElement("p",null,"Overall"),l.a.createElement(f.a,{striped:!0,bordered:!0,hover:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Total Entries (Cans)"),l.a.createElement("th",null,"Unique Entries"),l.a.createElement("th",null,"Total Survey Results"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,T.total.cans),l.a.createElement("td",null,T.total.unique),l.a.createElement("td",null,T.total.surveys)))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.c9458c36.chunk.js.map