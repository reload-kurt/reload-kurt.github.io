(this["webpackJsonphusky-reporting"]=this["webpackJsonphusky-reporting"]||[]).push([[0],{12:function(e,t,a){e.exports=a(26)},17:function(e,t,a){},19:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),c=a.n(l),u=(a(17),a(6)),s=a.n(u),o=a(10),i=a(5),m=(a(19),a(20),a(28)),d=a(29),h=a(30),E=a(32),p=a(33),f=a(34),b=a(31);var y=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),u=Object(i.a)(c,2),y=u[0],k=u[1],v=Object(n.useState)(null),g=Object(i.a)(v,2),w=g[0],x=g[1],j=Object(n.useState)(null),S=Object(i.a)(j,2),O=S[0],q=S[1],P=Object(n.useState)({round:{cans:0,unique:0,surveys:0},total:{cans:0,unique:0,surveys:0}}),A=Object(i.a)(P,2),T=A[0],C=(A[1],function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,r,l,c,u,o,i,m,d,h;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=a){e.next=3;break}return alert("Don't forget the token!"),e.abrupt("return");case 3:if(null!=w&&null!=O){e.next=6;break}return alert("Please select start and end date of round first"),e.abrupt("return");case 6:return k(!0),t=T,n=w+" 00:01:00,"+O+" 23:59:00",e.next=11,fetch("https://compo-api.huskypet.co.za/husky-microsite/items/survey?access_token="+a+"&filter[created_on][between]="+n).catch((function(e){return alert("Unable to communicate with API")}));case 11:return r=e.sent,e.next=14,fetch("https://compo-api.huskypet.co.za/husky-microsite/items/survey?access_token="+a+"&limit=-1").catch((function(e){return alert("Unable to communicate with API")}));case 14:return l=e.sent,e.next=17,fetch("https://compo-api.huskypet.co.za/husky-microsite/items/entries?access_token="+a+"&filter[created_on][between]="+n).catch((function(e){return alert("Unable to communicate with API")}));case 17:return c=e.sent,e.next=20,fetch("https://compo-api.huskypet.co.za/husky-microsite/items/entries?access_token="+a+"&limit=-1").catch((function(e){return alert("Unable to communicate with API")}));case 20:if(u=e.sent,!(r&&r.ok&&l&&l.ok&&c&&c.ok&&u&&u.ok)){e.next=42;break}return e.next=24,r.json();case 24:return o=e.sent,e.next=27,l.json();case 27:return i=e.sent,e.next=30,c.json();case 30:return m=e.sent,e.next=33,u.json();case 33:d=e.sent,t.round.surveys=o.data.length,t.total.surveys=i.data.length,t.round.cans=m.data.length,t.total.cans=d.data.length,h=m.data.map((function(e){return e.customer})),t.round.unique=Array.from(new Set(h)).length,h=d.data.map((function(e){return e.customer})),t.total.unique=Array.from(new Set(h)).length;case 42:k(!1);case 43:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return r.a.createElement("div",{className:"App"},r.a.createElement(m.a,null,r.a.createElement(d.a,null,r.a.createElement(h.a,null,r.a.createElement(E.a,{className:"mb-3"},r.a.createElement(E.a.Prepend,null,r.a.createElement(E.a.Text,{id:"basic-addon3"},"Security token (ask Kurt):")),r.a.createElement(p.a,{id:"basic-url","aria-describedby":"basic-addon3",onChange:function(e){return l(e.target.value)}})))),r.a.createElement(d.a,null,r.a.createElement(h.a,null,r.a.createElement("p",null,"Select the first day this round starts and the last day of the round.",r.a.createElement("br",null),r.a.createElement("small",null,"(System will automatically select 00:01 and 23:59 from first/last)")))),r.a.createElement(d.a,null,r.a.createElement(h.a,null,r.a.createElement(E.a,{className:"mb-3"},r.a.createElement(E.a.Prepend,null,r.a.createElement(E.a.Text,null,"First Day")),r.a.createElement(p.a,{onChange:function(e){return x(e.target.value)},type:"date"}))),r.a.createElement(h.a,null,r.a.createElement(E.a,{className:"mb-3"},r.a.createElement(E.a.Prepend,null,r.a.createElement(E.a.Text,null,"Last Day")),r.a.createElement(p.a,{onChange:function(e){return q(e.target.value)},type:"date"}))),r.a.createElement(h.a,null,r.a.createElement(f.a,{block:!0,variant:"primary",onClick:function(){return C()}},"Refresh"))),r.a.createElement(d.a,null,r.a.createElement(h.a,null,r.a.createElement("hr",null))),r.a.createElement(d.a,null,r.a.createElement(h.a,null,y?r.a.createElement("p",null,"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Selected Round"),r.a.createElement(b.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Total Entries (Cans)"),r.a.createElement("th",null,"Round Unique Entries"),r.a.createElement("th",null,"Total Survey Results"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,T.round.cans),r.a.createElement("td",null,T.round.unique),r.a.createElement("td",null,T.round.surveys)))),r.a.createElement("p",null,"Overall"),r.a.createElement(b.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Total Entries (Cans)"),r.a.createElement("th",null,"Unique Entries"),r.a.createElement("th",null,"Total Survey Results"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,T.total.cans),r.a.createElement("td",null,T.total.unique),r.a.createElement("td",null,T.total.surveys)))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.ade9b13f.chunk.js.map